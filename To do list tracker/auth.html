<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FocusFlow ‚Äî Sign in / Sign up</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0e0f13;
      --panel: rgba(255,255,255,0.08);
      --panel-strong: rgba(255,255,255,0.12);
      --text: #e8eaf0;
      --muted:#a8afc3;
      --ring:#60a5fa;
      --brandA:#7c3aed; --brandB:#06b6d4; --accent:#22d3ee;
      --shadow: 0 20px 50px rgba(0,0,0,.45);
      --radius: 18px;
      --gradient: linear-gradient(135deg, rgba(124,58,237,.55), rgba(6,182,212,.55));
      --gradient-soft: linear-gradient(135deg, rgba(124,58,237,.25), rgba(6,182,212,.25));
      --ok:#10b981; --warn:#f59e0b; --bad:#ef4444;
      --chip: rgba(255,255,255,.1);
    }
    body.light{
      --bg:#f7f8fc; --panel:rgba(255,255,255,.75); --panel-strong:rgba(255,255,255,.9);
      --text:#142033; --muted:#5c6a85; --ring:#2563eb;
      --shadow: 0 20px 50px rgba(3,7,18,.12);
      --chip: rgba(0,0,0,.06);
      --gradient: linear-gradient(135deg, rgba(124,58,237,.35), rgba(6,182,212,.35));
      --gradient-soft: linear-gradient(135deg, rgba(124,58,237,.18), rgba(6,182,212,.18));
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 10% -10%, rgba(124,58,237,.18), transparent 60%),
        radial-gradient(900px 600px at 110% 20%, rgba(6,182,212,.15), transparent 55%),
        var(--bg);
      background-attachment: fixed;
      display:grid; place-items:center; padding:24px;
    }
    .glass{
      backdrop-filter: blur(12px) saturate(140%);
      -webkit-backdrop-filter: blur(12px) saturate(140%);
      background: var(--panel);
      border: 1px solid rgba(255,255,255,.16);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .auth{
      max-width: 980px; width: 100%; display:grid; grid-template-columns: 1.1fr 1fr;
      overflow: hidden;
    }
    .left{
      padding: 28px; display:grid; gap:18px; align-content:start;
      background-image: var(--gradient-soft);
    }
    .logo{
      margin:0; font-weight:900; letter-spacing:.4px;
      background: linear-gradient(90deg,#7c3aed,#06b6d4,#22d3ee);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      filter: drop-shadow(0 4px 16px rgba(34,211,238,.35));
    }
    .pitch{ color:var(--muted); line-height:1.55 }
    .feature{
      display:flex; gap:10px; align-items:flex-start; padding:10px 12px; border-radius:12px; background:var(--chip);
      border:1px solid rgba(255,255,255,.12);
    }
    .right{
      position:relative; padding: 28px;
      display:grid; align-content:start; gap:16px;
    }
    .tabs{ display:flex; gap:10px; }
    .tab{
      border:0; padding:10px 14px; border-radius:12px; cursor:pointer;
      background: var(--panel-strong); color: var(--text); outline: 2px solid transparent; transition: .2s;
    }
    .tab[aria-selected="true"]{ background-image: var(--gradient); color:#fff }
    form{
      display:grid; gap:12px; margin-top:6px;
    }
    label{ font-size:13px; color:var(--muted); }
    .field{
      display:grid; gap:6px;
    }
    .input{
      height:44px; padding:0 12px; border-radius:12px; border:1px solid rgba(255,255,255,.18);
      background: var(--panel-strong); color:var(--text); outline:none;
      transition: box-shadow .2s, border-color .2s;
    }
    .input:focus{ box-shadow: 0 0 0 3px rgba(96,165,250,.3); border-color: var(--ring); }
    .row{ display:flex; gap:10px; align-items:center; justify-content:space-between; }
    .hint{ font-size:12px; color:var(--muted) }
    .meter{
      height:8px; border-radius:8px; overflow:hidden; background: rgba(255,255,255,.15);
      border:1px solid rgba(255,255,255,.2);
    }
    .meter > div{ height:100%; width:0%; transition: width .25s }
    .weak{ background:#ef4444 } .okc{ background:#f59e0b } .good{background:#10b981} .great{background:#22d3ee}
    .actions{ display:flex; gap:10px; align-items:center; }
    .btn{
      border:0; border-radius:12px; padding:10px 14px; cursor:pointer;
      background: var(--panel-strong); color: var(--text);
      outline:2px solid transparent; transition: transform .18s, outline-color .18s, background .18s;
    }
    .btn:hover{ transform: translateY(-1px) }
    .btn.primary{ background-image: var(--gradient); color:#fff }
    .btn.oauth{ width:100%; display:flex; align-items:center; justify-content:center; gap:8px }
    .divider{ display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:12px; color:var(--muted); font-size:12px }
    .divider::before,.divider::after{ content:''; height:1px; background: rgba(255,255,255,.2) }
    .error{ font-size:12px; color:var(--bad) }
    .success{ font-size:12px; color:var(--ok) }
    .showpass{ position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer; opacity:.8 }
    .rel{ position:relative }
    .footer{ text-align:center; font-size:12px; color:var(--muted) }
    @media (max-width:900px){ .auth{ grid-template-columns:1fr } .left{display:none} }
  </style>
</head>
<body class="light">
  <div class="auth glass" role="application" aria-label="Authentication">
    <!-- LEFT / marketing panel -->
    <div class="left">
      <h1 class="logo">Focus<span>Flow</span></h1>
      <h3 style="margin:0">Welcome back, creator ‚ö°</h3>
      <p class="pitch">Plan ruthlessly. Execute beautifully. Notes, tasks, gradients, and flow ‚Äî all in one.</p>
      <div class="feature"><span>‚è±Ô∏è</span><div><b>Fast</b><br><small>Snappy interactions under 100ms.</small></div></div>
      <div class="feature"><span>üîí</span><div><b>Private</b><br><small>Local-first demo. Your data stays on your device.</small></div></div>
      <div class="feature"><span>‚ú®</span><div><b>Glassy</b><br><small>Gradient UI with tasteful motion and accessibility.</small></div></div>
    </div>

    <!-- RIGHT / forms -->
    <div class="right">
      <div class="row" style="justify-content:space-between">
        <div class="tabs" role="tablist" aria-label="Choose form">
          <button id="tab-signin" class="tab" role="tab" aria-selected="true" aria-controls="panel-signin">Sign in</button>
          <button id="tab-signup" class="tab" role="tab" aria-selected="false" aria-controls="panel-signup">Create account</button>
        </div>
        <button id="theme-toggle" class="tab" title="Theme">üåô</button>
      </div>

      <!-- Sign in -->
      <form id="panel-signin" role="tabpanel" aria-labelledby="tab-signin" autocomplete="on">
        <div class="field">
          <label for="si-email">Email</label>
          <input id="si-email" class="input" name="email" type="email" placeholder="you@example.com" required />
        </div>
        <div class="field rel">
          <label for="si-pass">Password</label>
          <input id="si-pass" class="input" name="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
          <span class="showpass" data-target="si-pass" role="button" aria-label="Show password">üëÅÔ∏è</span>
        </div>
        <div class="row">
          <label class="row" style="gap:6px"><input id="remember" type="checkbox" /> <span class="hint">Remember me on this device</span></label>
          <a href="#" id="forgot" class="hint" title="Mock">Forgot password?</a>
        </div>
        <div id="si-msg" aria-live="polite" class="error" style="min-height:16px"></div>
        <div class="actions">
          <button class="btn primary" type="submit">Sign in</button>
          <a class="btn" href="index.html">Back to app</a>
        </div>
        <div class="divider">or continue with</div>
        <div class="actions" style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
          <button class="btn oauth" type="button" id="oauth-google">‚óé Google</button>
          <button class="btn oauth" type="button" id="oauth-github">‚óÜ GitHub</button>
        </div>
      </form>

      <!-- Sign up -->
      <form id="panel-signup" role="tabpanel" aria-labelledby="tab-signup" hidden>
        <div class="field">
          <label for="su-name">Full name</label>
          <input id="su-name" class="input" name="name" type="text" placeholder="Eswar S" required />
        </div>
        <div class="field">
          <label for="su-email">Email</label>
          <input id="su-email" class="input" name="email" type="email" placeholder="you@example.com" required />
        </div>
        <div class="field rel">
          <label for="su-pass">Password</label>
          <input id="su-pass" class="input" name="password" type="password" placeholder="At least 8 chars" minlength="8" required />
          <span class="showpass" data-target="su-pass" role="button" aria-label="Show password">üëÅÔ∏è</span>
        </div>
        <div class="meter" aria-hidden="true"><div id="meter"></div></div>
        <div class="hint" id="strength-hint">Strength: ‚Äî</div>
        <div class="field">
          <label for="su-pass2">Confirm password</label>
          <input id="su-pass2" class="input" name="confirm" type="password" placeholder="Re-enter password" required />
        </div>
        <label class="row" style="gap:6px">
          <input id="tos" type="checkbox" required />
          <span class="hint">I agree to the mock Terms</span>
        </label>
        <div id="su-msg" aria-live="polite" class="error" style="min-height:16px"></div>
        <div class="actions">
          <button class="btn primary" type="submit">Create account</button>
          <button class="btn" type="button" id="demo-fill">Fill demo</button>
        </div>
      </form>

      <div class="footer">¬© 2025 FocusFlow ‚Äî Local demo authentication</div>
    </div>
  </div>

  <script>
    // ---------- Theme ----------
    (function initTheme(){
      const key = 'focusflow.theme';
      const btn = document.getElementById('theme-toggle');
      const apply = t => {
        document.body.classList.remove('light','dark','amoled');
        document.body.classList.add(t || 'light');
        btn.textContent = t==='light' ? 'üåô' : (t==='dark' ? 'üí°' : '‚òÄÔ∏è');
        localStorage.setItem(key, t);
      };
      apply(localStorage.getItem(key) || 'light');
      btn.addEventListener('click', () => {
        const cur = document.body.classList.contains('light') ? 'light' :
                    document.body.classList.contains('dark') ? 'dark' : 'amoled';
        const next = cur==='light' ? 'dark' : (cur==='dark' ? 'amoled' : 'light');
        apply(next);
      });
    })();

    // ---------- Tabs ----------
    const tabIn = document.getElementById('tab-signin');
    const tabUp = document.getElementById('tab-signup');
    const panelIn = document.getElementById('panel-signin');
    const panelUp = document.getElementById('panel-signup');
    function showTab(which){
      const isUp = which==='up';
      tabIn.setAttribute('aria-selected', String(!isUp));
      tabUp.setAttribute('aria-selected', String(isUp));
      panelIn.hidden = isUp;
      panelUp.hidden = !isUp;
    }
    tabIn.addEventListener('click', ()=> showTab('in'));
    tabUp.addEventListener('click', ()=> showTab('up'));

    // ---------- Show / hide password ----------
    document.querySelectorAll('.showpass').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-target');
        const input = document.getElementById(id);
        input.type = input.type === 'password' ? 'text' : 'password';
      });
    });

    // ---------- Strength meter ----------
    const pass = document.getElementById('su-pass');
    const meter = document.getElementById('meter');
    const hint = document.getElementById('strength-hint');
    function strengthScore(pw){
      let s = 0;
      if (pw.length >= 8) s++;
      if (/[A-Z]/.test(pw)) s++;
      if (/[a-z]/.test(pw)) s++;
      if (/[0-9]/.test(pw)) s++;
      if (/[^A-Za-z0-9]/.test(pw)) s++;
      return s; // 0..5
    }
    function updateMeter(){
      const s = strengthScore(pass.value);
      const pct = (s/5)*100;
      meter.style.width = pct + '%';
      meter.className = '';
      meter.classList.add(s<=2 ? 'weak' : s===3 ? 'okc' : s===4 ? 'good' : 'great');
      const labels = ['‚Äî','Very weak','Weak','Okay','Good','Great'];
      hint.textContent = 'Strength: ' + labels[s];
    }
    pass && pass.addEventListener('input', updateMeter);

    // ---------- Mock Auth Service ----------
    const AUTH_USER_KEY = 'focusflow.auth.user';   // profile
    const AUTH_TOKEN_KEY = 'focusflow.auth.token'; // session
    async function sha256(str){
      const buf = new TextEncoder().encode(str);
      const hash = await crypto.subtle.digest('SHA-256', buf);
      return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,'0')).join('');
    }
    const Auth = {
      get user(){ return JSON.parse(localStorage.getItem(AUTH_USER_KEY) || 'null'); },
      set user(u){ localStorage.setItem(AUTH_USER_KEY, JSON.stringify(u)); },
      setToken(persist){
        const token = Math.random().toString(36).slice(2) + '.' + Date.now().toString(36);
        (persist ? localStorage : sessionStorage).setItem(AUTH_TOKEN_KEY, token);
        if (!persist) localStorage.removeItem(AUTH_TOKEN_KEY);
        return token;
      },
      clear(){
        sessionStorage.removeItem(AUTH_TOKEN_KEY);
        localStorage.removeItem(AUTH_TOKEN_KEY);
      },
      isAuthed(){ return !!(localStorage.getItem(AUTH_TOKEN_KEY) || sessionStorage.getItem(AUTH_TOKEN_KEY)); }
    };

    // If already authenticated, bounce to app
    if (Auth.isAuthed()) {
      window.location.replace('index.html');
    }

    // ---------- Sign in ----------
    document.getElementById('panel-signin').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const email = document.getElementById('si-email').value.trim().toLowerCase();
      const pw = document.getElementById('si-pass').value;
      const remember = document.getElementById('remember').checked;
      const msg = document.getElementById('si-msg');
      msg.textContent = '';

      const user = Auth.user;
      if (!user || user.email !== email) { msg.textContent = 'No account found for this email.'; return; }
      const hpw = await sha256(pw);
      if (hpw !== user.hpw) { msg.textContent = 'Incorrect password.'; return; }

      Auth.setToken(remember);
      msg.className = 'success'; msg.textContent = 'Success! Redirecting‚Ä¶';
      setTimeout(()=> window.location.replace('index.html'), 400);
    });

    // ---------- Sign up ----------
    document.getElementById('panel-signup').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const name = document.getElementById('su-name').value.trim();
      const email = document.getElementById('su-email').value.trim().toLowerCase();
      const pw1 = document.getElementById('su-pass').value;
      const pw2 = document.getElementById('su-pass2').value;
      const tos = document.getElementById('tos').checked;
      const msg = document.getElementById('su-msg'); msg.textContent = '';

      if (!/^\S+@\S+\.\S+$/.test(email)) { msg.textContent = 'Enter a valid email.'; return; }
      if (pw1.length < 8) { msg.textContent = 'Password must be at least 8 characters.'; return; }
      if (pw1 !== pw2) { msg.textContent = 'Passwords do not match.'; return; }
      if (!tos) { msg.textContent = 'Please accept the Terms.'; return; }

      const hpw = await sha256(pw1);
      Auth.user = { name, email, hpw, createdAt: new Date().toISOString() };
      msg.className = 'success'; msg.textContent = 'Account created! You can sign in now.';
      showTab('in');
      document.getElementById('si-email').value = email;
      document.getElementById('si-pass').focus();
    });

    // ---------- Demo helpers ----------
    document.getElementById('demo-fill').addEventListener('click', ()=>{
      document.getElementById('su-name').value = 'Eswar';
      document.getElementById('su-email').value = 'eswar@example.com';
      document.getElementById('su-pass').value = 'Eswar@1234';
      document.getElementById('su-pass2').value = 'Eswar@1234';
      updateMeter();
    });
    document.getElementById('forgot').addEventListener('click', (e)=>{
      e.preventDefault();
      alert('Mock demo: password reset emails are not implemented in the local-only demo.');
    });

    // ---------- OAuth placeholders ----------
    document.getElementById('oauth-google').addEventListener('click', ()=> alert('Mock Google OAuth ‚Äî wire to your provider later.'));
    document.getElementById('oauth-github').addEventListener('click', ()=> alert('Mock GitHub OAuth ‚Äî wire to your provider later.'));
  </script>
</body>
</html>
